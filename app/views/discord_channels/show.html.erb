<h2>Players</h2>
<table id="players_table">
  <thead>
    <tr>
      <th>Rank</th>
      <th>Name</th>
      <th data-sort-method='dotsep'>CSE</th>
      <th data-sort-method='number'>Played</th>
      <th data-sort-method='number'>Wins</th>
      <th data-sort-method='number'>Losses</th>
      <th data-sort-method='number'>Draws</th>
      <th data-sort-method='number'>Last Match Date</th>
    </tr>
  </thead>
  <tbody>
    <% @discord_channel.players.each_with_index do |player, index| %>
      <% discord_channel_player = player.discord_channel_players.find_or_create_by(discord_channel_id: @discord_channel.id) %>
      <% trueskill_rating = discord_channel_player.trueskill_rating %>
      <tr>
        <td><%= index + 1 %></td>
        <td><%= player.name %></td>
        <td><%= number_with_precision(trueskill_rating.conservative_skill_estimate, precision: 2) %></td>
        <td style="text-align:right;"><%= discord_channel_player.match_count %></td>
        <td style="text-align:right;"><%= discord_channel_player.win_count %></td>
        <td style="text-align:right;"><%= discord_channel_player.loss_count %></td>
        <td style="text-align:right;"><%= discord_channel_player.draw_count %></td>
        <td data-sort="<%= player.last_match_date && player.last_match_date.to_i %>"><%= player.last_match_date && local_time_ago(player.last_match_date) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
